Revision: 2c728b3ce699b19248e521d69629f1439f7ad63d
Patch-set: 2
File: tools/buildbot-build.sh

22:0-25:2
Fri Oct 21 21:14:48 2016 +0000
Author: Colin Cross <1002751@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dcf74308_6fdb7963
Bytes: 139
If you delete this, and remove ${ANDROID_BUILD_TOP}/ below, then this script will work exactly as well as running make directly would have.

22:0-25:2
Sat Oct 22 12:38:32 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: dcf74308_6fdb7963
UUID: 7c0657a0_2ec5d3f3
Bytes: 49
Which is required, as the bots don't do envsetup.

22:0-25:2
Mon Oct 24 19:31:27 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 7c0657a0_2ec5d3f3
UUID: c1d3dce9_b2898040
Bytes: 93
Ok, so should I just have it check for the TARGET_VARIANT, TARGET_PRODUCT env variables only?

22:0-25:2
Mon Oct 24 19:33:19 2016 +0000
Author: Colin Cross <1002751@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: c1d3dce9_b2898040
UUID: c1d3dce9_b21e6020
Bytes: 166
No, those are optional and will be defaulted by the build system as necessary.  Don't add any new checks, just source ./build/envsetup.sh and get the build variables.

22:0-25:2
Mon Oct 24 19:34:49 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: c1d3dce9_b2898040
UUID: bc352f64_a5ca2858
Bytes: 134
The buildbot currently only defines those:
TARGET_BUILD_TYPE
TARGET_BUILD_VARIANT
TARGET_PRODUCT
ANDROID_BUILD_TOP
ANDROID_PRODUCT_OUT

22:0-25:2
Mon Oct 24 19:36:58 2016 +0000
Author: Igor Murashkin <1021471@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: bc352f64_a5ca2858
UUID: c1d3dce9_f202a8b5
Bytes: 639
Colin,
> You can just set TARGET_PRODUCT and TARGET_VARIANT to build without using lunch, so there still isn't any strict requirement to source build/envsetup.sh before running this script.  You do need to source it inside the script, but if you are requiring running from the top of the build that is easy.

Is what you said last time. So you're saying it will build without any env variables at all?

Nicolas,
I can remove this check entirely although maybe we want to check for 1 or more of them for sanity?

Also since you're saying we already define ANDROID_BUILD_TOP for the buildbot, then it seems like this script would work as-is.

