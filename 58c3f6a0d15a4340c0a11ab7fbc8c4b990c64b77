Revision: 58c3f6a0d15a4340c0a11ab7fbc8c4b990c64b77
Patch-set: 4
File: runtime/class_table.cc

36:0-41:3
Wed Dec 07 11:22:39 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 0d5d2bd4_05645227
Bytes: 155
This calculates the hash for each class_set it looks at. I'd guess that classes_ is never empty, so just pull the TableSlot(klass) out of the loop, please.

36:0-41:3
Mon Dec 12 22:56:05 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0d5d2bd4_05645227
UUID: 3a2b0780_2551d224
Bytes: 4
Done

47:0-52:3
Wed Dec 07 11:22:39 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 0d5d2bd4_25614e18
Bytes: 5
ditto

47:0-52:3
Mon Dec 12 22:56:05 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0d5d2bd4_25614e18
UUID: 3a2b0780_653fdac9
Bytes: 4
Done

115:18-115:42
Wed Dec 07 11:22:39 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 0d5d2bd4_852842b1
Bytes: 172
Both TableSlot(klass) and Insert(...) calculate the hash. Pull the hash calculation out of this expression.

Even better, just calculate the hash and call InsertWithHash().

115:18-115:42
Mon Dec 12 22:56:05 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0d5d2bd4_852842b1
UUID: 3a2b0780_054ed687
Bytes: 4
Done

119:18-119:42
Wed Dec 07 11:22:39 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 0d5d2bd4_45432a80
Bytes: 62
Ditto, except that we don't have InsertWithHashWithoutLocks().

119:18-119:42
Mon Dec 12 22:56:05 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0d5d2bd4_45432a80
UUID: 3a2b0780_255c3235
Bytes: 4
Done

129:2-129:75
Wed Dec 07 11:22:39 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 0d5d2bd4_253aaef6
Bytes: 35
Do this before acquiring the lock_.

129:2-129:75
Mon Dec 12 22:56:05 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0d5d2bd4_253aaef6
UUID: 3a2b0780_e5650af6
Bytes: 4
Done

245:21-246:91
Wed Dec 07 11:22:39 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 0d5d2bd4_a5221ec7
Bytes: 193
Move this to a private static helper function and change this constructor to forward to TableSlot(klass, hash). That way, data_ will be constructed directly without the need for StoreRelaxed().

245:21-246:91
Mon Dec 12 22:56:05 2016 +0000
Author: Mathieu Chartier <1015378@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 0d5d2bd4_a5221ec7
UUID: 3a2b0780_65911a9e
Bytes: 4
Done

