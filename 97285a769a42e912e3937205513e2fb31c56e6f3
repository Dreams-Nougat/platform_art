Revision: 97285a769a42e912e3937205513e2fb31c56e6f3
Patch-set: 3
File: compiler/oat_writer.cc

778:42-778:59
Mon Oct 24 15:58:19 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7c0657a0_6ee4eb25
Bytes: 95
Check empty() instead. It should not matter for an empty ArrayRef<> whether the data() is null.

915:42-915:59
Mon Oct 24 15:58:19 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7c0657a0_4ee12714
Bytes: 5
ditto

1399:62-1399:79
Mon Oct 24 15:58:19 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: fce08714_f23fa01f
Bytes: 5
ditto

1672:40-1672:57
Mon Oct 24 15:58:19 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 2123d89f_751e687a
Bytes: 5
ditto

1678:8-1679:39
Mon Oct 24 15:58:19 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7c0657a0_ee569be7
Bytes: 303
This sequential representation is slow to search through without the oat file (i.e. touching lots of pages if everything is quickened). I think we should aim for quick retrieval even without the oat file. Another goal (not for this CL) would be to allow quickening even those methods that we do compile.

File: compiler/oat_writer.h

125
Mon Oct 24 15:58:19 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7c0657a0_ce0d171b
Bytes: 40
Add comment about WriteQuickeningInfo()?

File: oatdump/oatdump.cc

1034
Mon Oct 24 15:58:19 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: dcf663e5_063afce2
Bytes: 238
Isn't this rather weak? Shouldn't we check

    kIsVdexEnabled ? vmap_table_offset >= vdex_file_.Size()
                   : vmap_table_offset >= method_header->GetCode() - oat_file_.Begin()

? (Assuming we have access to the vdex_file_.)

File: runtime/vdex_file.h

62
Mon Oct 24 15:58:19 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 7c0657a0_4efa47ce
Bytes: 100
We should theoretically bump the vdex version for this. But maybe we don't want to do that just yet?

