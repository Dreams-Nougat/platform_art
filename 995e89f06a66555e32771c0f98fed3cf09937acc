Revision: 995e89f06a66555e32771c0f98fed3cf09937acc
Patch-set: 3
File: runtime/native/dalvik_system_ZygoteHooks.cc

106:0-110:40
Mon Nov 14 13:19:51 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d0ff2c21_7bbf7f06
Bytes: 86
How about DEBUG_JAVA_DEBUGGABLE? (to make it consistent with DEBUG_NATIVE_DEBUGGABLE).

110
Mon Nov 14 17:52:38 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: d0ff2c21_7bbf7f06
UUID: 8b5ca306_4a7bd52f
Bytes: 222
I honestly think that would be confusing since we already support java debuggers. This name says exactly what it ensures.

Honestly I don't really like the name native_debuggable either. Both are extremely unhelpful names.

110
Mon Nov 14 21:10:23 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8b5ca306_4a7bd52f
UUID: 1023849f_b599a068
Bytes: 266
DEBUGGABLE has been the name all along. You might argue you could make deoptimizable/debuggable different, but this isn't the path we're going: an app is either debuggable or not.

So having DEBUGGABLE in the name is desirable IMO. An other option is DEBUGGABLE_APP.

110
Mon Nov 14 21:34:01 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 1023849f_b599a068
UUID: 3045e884_fee18110
Bytes: 921
Yes but we already have an ENABLE_DEBUGGER flag. Having 2 extremely similar names seems confusing.

How about ENABLE_FULL_DEOPT. Then it matches the style of the first 5 options, says what it's doing and doesn't add to the confusing array of options with DEBUG in the name (currently 3).

Also I'd say that all of the options currently have names that describe what they do (Except for native_debuggable) and many of them are set only in groups (i.e. ENABLE_DEBUGGER is always set with ENABLE_CHECKJNI, NATIVE_DEBUGGABLE is always set with ALWAYS_JIT and GENERATE_DEBUG_INFO). This indicates to me that each option should do the minimum necessary (and be set in conjunction with others by the zygote) and should be named for what it actually DOES, not what it's FOR. Therefore I believe that an appropriate name should say that it allows deopting everything and we shouldn't mention that it is related to debuggable apps.

File: runtime/runtime.h

597:0-603:3
Mon Nov 14 13:19:51 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d0ff2c21_5bc4c3a0
Bytes: 41
What is the difference with IsDebuggable?

603
Mon Nov 14 17:52:38 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: d0ff2c21_5bc4c3a0
UUID: 8b5ca306_ea6bc962
Bytes: 51
IsDebuggable is based on the primary oat file only.

603
Mon Nov 14 21:10:23 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8b5ca306_ea6bc962
UUID: 90177437_b9d75faa
Bytes: 175
That's an implementation problem. The goal of IsDebuggable it to know whether the app is debuggable, which is what looks to me you're also trying to say with IsFullyDeoptable.

File: runtime/runtime_options.def

124:0-124:90
Mon Nov 14 13:19:51 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: d0ff2c21_9b7a4b8d
Bytes: 46
I don't understand why we need another option?

124
Mon Nov 14 17:52:38 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: d0ff2c21_9b7a4b8d
UUID: 8b5ca306_0a71dd51
Bytes: 63
We cannot have this set for run-tests without adding an option.

124
Mon Nov 14 21:10:23 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8b5ca306_0a71dd51
UUID: 1023849f_d59c1c5a
Bytes: 43
--debuggable is supposed to be that option.

124
Mon Nov 14 21:43:34 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 1023849f_d59c1c5a
UUID: 3045e884_fec2213f
Bytes: 57
There is no --debuggable flag. That is only for run-test.

