Revision: a5ebc6917e613be1657b1738b7e1f1a1fd94e3b7
Patch-set: 4
File: /COMMIT_MSG

7:0-7:41
Mon Dec 19 16:21:27 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 17237e9f_75442895
Bytes: 135
The commit message is utterly misleading. It looks as if you're adding a new sharpening kind where you're actually removing some kinds.

7:0-7:41
Tue Dec 20 09:24:57 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 17237e9f_75442895
UUID: 17237e9f_95e7c4f6
Bytes: 4
Done

10:24-10:40
Mon Dec 19 16:21:27 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 17237e9f_1553b459
Bytes: 99
You are also removing stuff related to non-PIC on-device build of the boot image. Is that intended?

10:24-10:40
Tue Dec 20 09:24:57 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 17237e9f_1553b459
UUID: 17237e9f_55cb6c63
Bytes: 22
Yes, extended comment.

11
Mon Dec 19 16:21:27 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 17237e9f_354eb0b3
Bytes: 15
Any benchmarks?

11
Tue Dec 20 09:24:57 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 17237e9f_354eb0b3
UUID: 17237e9f_35d0f00b
Bytes: 33
Which ones would you like to see?

11
Tue Dec 20 12:48:43 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 17237e9f_35d0f00b
UUID: 17237e9f_1890892a
Bytes: 481
Something that calls a boot image method that calls another boot image method. For example, calling String.codePointAt(0) with the 0 hidden, preventing the elimination of the bound checks and inlining the String.codePointAt():

  public static void $noinline$codePointAtLoop(String s, int index, int count) {
    if (doThrow) { throw new Error(); }  // Prevent inlining.
    for (int i = 0; i < count; ++i) {
      s.codePointAt(index);  // Not inlined, may throw SIOOBE.
    }
  }

File: compiler/optimizing/sharpening.cc

92
Mon Dec 19 15:13:11 2016 +0000
Author: Vladimir Marko <1018108@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 17237e9f_95d344bc
Bytes: 211
It seems you are deliberately removing 3 of the 5 call kinds with the intention of never using them again. In that case, please remove them from the CodePtrLocation and remove all related code from all codegens.

92
Mon Dec 19 16:21:48 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 17237e9f_95d344bc
UUID: d7180671_9308fc09
Bytes: 40
Yes, see my top-level comment on PS2 ;-)

