Revision: cb811a45c540c9835f296eb9f8e41c1b31af9e00
Patch-set: 1
File: runtime/parsed_options.cc

69:7-70:29
Tue Sep 13 18:33:03 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8be1fa42_02e8caa5
Bytes: 99
Would it make sense to make this more explicit? Have -Xprivileged-zygote and -Xunprivileged-zygote?

70
Tue Sep 13 19:53:27 2016 +0000
Author: Robert Sesek <1042203@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8be1fa42_02e8caa5
UUID: 4b1462d4_9b3f4f75
Bytes: 95
When writing this, I was thinking -Xzygote=<privileged|unprivileged>. Do you have a preference?

70
Tue Sep 13 20:46:14 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4b1462d4_9b3f4f75
UUID: 8be1fa42_a8ed7ff1
Bytes: 93
Seems fine to me, though parsing would be harder, I think. You'd have to write a type for it.

File: runtime/runtime.cc

684:0-724:1
Tue Sep 13 18:30:11 2016 +0000
Author: Andreas Gampe <1041833@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 8be1fa42_e29a0660
Bytes: 145
I was discussing with bdc a couple weeks ago. Why is any of this here? Can we move this to frameworks code? Then we might not need the flag here.

724
Tue Sep 13 19:53:27 2016 +0000
Author: Robert Sesek <1042203@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 8be1fa42_e29a0660
UUID: 4b1462d4_fb23eb69
Bytes: 353
I think so. It looks like it could move to com_android_internal_os_Zygote_nativeUnmountStorageOnInit. This code was originally added here: https://android.googlesource.com/platform/art/+/bd86bccf1b47f1151842152ee52cf5d46d6b34ab%5E%21/#F12 from dalvik_system_Zygote.cc. And that file looks like it became com_android_internal_os_Zygote.cpp in frameworks.

