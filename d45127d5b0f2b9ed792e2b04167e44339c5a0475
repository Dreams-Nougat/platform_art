Revision: d45127d5b0f2b9ed792e2b04167e44339c5a0475
Patch-set: 5
File: runtime/art_method.cc

71:0-71:87
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_45f63e70
Bytes: 159
This looks stalled. Why are you referencing images? And if that's app images / boot images you're talking about, then indeed, they don't have obsolete methods.

71
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_45f63e70
UUID: ade97f6b_99c5a1f7
Bytes: 53
Refering to the kRuntimePointerSize on the next line.

File: runtime/mirror/class_ext.cc

49:0-50:94
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_0508368f
Bytes: 183
Please extend: what's wrong with the race condition? Correctness? Unnecessary allocations?

It looks to me correctness is ok as you ensure the ClassExt object is locked at this point.

50
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_0508368f
UUID: ade97f6b_79cadd04
Bytes: 66
Both. This is more just a general warning to myself to be careful.

File: runtime/openjdkjvmti/ti_redefine.cc

69:2-69:26
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_253f7a1c
Bytes: 21
Please add a comment.

69
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_253f7a1c
UUID: ade97f6b_d999e90c
Bytes: 4
Done

189:80-189:87
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_0536f644
Bytes: 25
... DexFile. The class ..

189
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_0536f644
UUID: ade97f6b_f9602d15
Bytes: 110
It's right the way it is. "the d.s.DexFile the class comes from" is where 'the art::DexFile' should be placed.

213:0-213:39
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_65a2624d
Bytes: 74
I assume this is related to klass_? Please expand or remove such comments.

213
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_65a2624d
UUID: ade97f6b_79fc1dfd
Bytes: 4
Done

238:2-238:44
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_85a7665a
Bytes: 15
Drop or extend.

238
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_85a7665a
UUID: ade97f6b_59f15923
Bytes: 4
Done

298:45-298:49
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_25ac5a3b
Bytes: 3
its

298
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_25ac5a3b
UUID: ade97f6b_19ebd131
Bytes: 4
Done

330:37-330:41
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_e5b51282
Bytes: 3
its

330
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_e5b51282
UUID: ade97f6b_f9e70d63
Bytes: 4
Done

330:92-331:13
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_05b3569d
Bytes: 30
"next 2 comments": which ones?

331
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_05b3569d
UUID: ade97f6b_b91f4577
Bytes: 4
Done

File: runtime/openjdkjvmti/ti_redefine.h

66:36-66:43
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_25669a66
Bytes: 6
class?

66
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_25669a66
UUID: ade97f6b_b99e25f2
Bytes: 4
Done

70:27-70:98
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_456b9e2b
Bytes: 67
required -> used

Or maybe just say the runtime makes a copy of it?

70
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_456b9e2b
UUID: ade97f6b_79989d04
Bytes: 4
Done

85:2-85:98
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_e54f52d9
Bytes: 45
Compared to keeping it in... ? mirror::Class?

85
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_e54f52d9
UUID: ade97f6b_d946899b
Bytes: 4
Done

115:9-115:60
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_054d96e0
Bytes: 29
Out parameters should be '*'.

115
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_054d96e0
UUID: ade97f6b_b97505ee
Bytes: 4
Done

130:83-130:85
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_a5594aa7
Bytes: 11
Remove '&'.

130
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_a5594aa7
UUID: ade97f6b_5964b93a
Bytes: 4
Done

136:79-136:81
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_c556ce76
Bytes: 11
remove '&'.

136
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_c556ce76
UUID: ade97f6b_3961f529
Bytes: 4
Done

139:79-139:81
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_654582b6
Bytes: 11
remove '&'.

139
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_654582b6
UUID: ade97f6b_196e3119
Bytes: 4
Done

144:2-144:30
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_854a06c4
Bytes: 46
LOG(WARNING) << "Unimplemented" in the method?

144
Wed Nov 30 18:25:48 2016 +0000
Author: Alex Light <1047769@85c56323-6fa9-3386-8a01-6480fb634889>
Parent: 4d90030a_854a06c4
UUID: ade97f6b_39dc55ce
Bytes: 61
Changes output of run-test making it no longer agree with RI.

