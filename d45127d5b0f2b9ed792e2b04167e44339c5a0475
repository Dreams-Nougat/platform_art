Revision: d45127d5b0f2b9ed792e2b04167e44339c5a0475
Patch-set: 5
File: runtime/art_method.cc

71:0-71:87
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_45f63e70
Bytes: 159
This looks stalled. Why are you referencing images? And if that's app images / boot images you're talking about, then indeed, they don't have obsolete methods.

File: runtime/mirror/class_ext.cc

49:0-50:94
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_0508368f
Bytes: 183
Please extend: what's wrong with the race condition? Correctness? Unnecessary allocations?

It looks to me correctness is ok as you ensure the ClassExt object is locked at this point.

File: runtime/openjdkjvmti/ti_redefine.cc

69:2-69:26
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_253f7a1c
Bytes: 21
Please add a comment.

189:80-189:87
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_0536f644
Bytes: 25
... DexFile. The class ..

213:0-213:39
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_65a2624d
Bytes: 74
I assume this is related to klass_? Please expand or remove such comments.

238:2-238:44
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_85a7665a
Bytes: 15
Drop or extend.

298:45-298:49
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_25ac5a3b
Bytes: 3
its

330:37-330:41
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_e5b51282
Bytes: 3
its

330:92-331:13
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_05b3569d
Bytes: 30
"next 2 comments": which ones?

File: runtime/openjdkjvmti/ti_redefine.h

66:36-66:43
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_25669a66
Bytes: 6
class?

70:27-70:98
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_456b9e2b
Bytes: 67
required -> used

Or maybe just say the runtime makes a copy of it?

85:2-85:98
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_e54f52d9
Bytes: 45
Compared to keeping it in... ? mirror::Class?

115:9-115:60
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_054d96e0
Bytes: 29
Out parameters should be '*'.

130:83-130:85
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_a5594aa7
Bytes: 11
Remove '&'.

136:79-136:81
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_c556ce76
Bytes: 11
remove '&'.

139:79-139:81
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_654582b6
Bytes: 11
remove '&'.

144:2-144:30
Wed Nov 30 10:15:39 2016 +0000
Author: Nicolas Geoffray <1038443@85c56323-6fa9-3386-8a01-6480fb634889>
UUID: 4d90030a_854a06c4
Bytes: 46
LOG(WARNING) << "Unimplemented" in the method?

